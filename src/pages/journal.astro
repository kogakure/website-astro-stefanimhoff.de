---
import { getCollection } from 'astro:content';

import { sortByDate } from '../utils';

import GridLayout from '../layouts/GridLayout.astro';
import PageTitle from '../components/PageTitle.astro';
import { Content as Intro } from '../text/journal/intro.mdx';
import { Link } from '../components';

import { mapping } from '../mdx-components';

const allJournal = await getCollection('journal');
allJournal.sort(sortByDate);

const title = 'Journal';
const description = 'â€¦';
---

<GridLayout title={title} description={description} grid="wide" class="grid" innerGrid>
	<PageTitle grid="wide" innerGrid>Journal</PageTitle>

	<article
		class="col-start-1 col-end-18 grid md:col-start-4 md:col-end-12 xl:col-start-5 xl:col-end-11"
	>
		<Intro components={mapping} />
	</article>

	<nav class="md:col-start-1 md:col-end-16" aria-label="Journal">
		<ol>
			{
				allJournal.map(({ slug, data }) => (
					<li>
						<Link title={data.title} href={`/${slug}/`}>
							{data.title}
						</Link>
					</li>
				))
			}
		</ol>
	</nav>
</GridLayout>
